<?xml version="1.0"?>
<!-- Copyright 2025 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!-- Network Settings Overlay Panel -->
<!-- Displays current WiFi status and available networks for connection -->
<!-- XML-First Design: All layout/styling here; C++ provides subjects and callbacks -->
<component>
  <view name="network_settings_overlay"
        extends="lv_obj" width="#overlay_panel_width" height="100%" align="right_mid" style_border_width="0"
        style_pad_all="0" style_bg_opa="255" style_bg_color="#card_bg" scrollable="false" flex_flow="column">
    <!-- Header Bar with title and back button -->
    <header_bar name="overlay_header" title="Network Settings"/>
    <!-- Content Area -->
    <lv_obj name="overlay_content"
            width="100%" flex_grow="1" style_bg_opa="0" style_pad_all="#space_lg" scrollable="true"
            style_border_width="0" flex_flow="column" style_pad_gap="#space_lg">
      <!-- ================================================================== -->
      <!-- CURRENT CONNECTION SECTION -->
      <!-- ================================================================== -->
      <lv_obj name="connection_status_section"
              width="100%" height="content" style_bg_color="#card_bg" style_bg_opa="0" style_border_width="0"
              style_pad_all="0" scrollable="false" flex_flow="column" style_pad_gap="#space_sm">
        <!-- Section Label -->
        <lv_obj width="100%"
                height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
          <icon src="wifi" size="sm" variant="secondary"/>
          <text_body text="Current Connection" style_text_color="#text_primary"/>
        </lv_obj>
        <!-- Connection Status Card -->
        <lv_obj width="100%"
                height="content" style_bg_color="#app_bg_color" style_bg_opa="255" style_radius="#border_radius"
                style_border_width="0" style_pad_all="#space_lg" scrollable="false" flex_flow="column"
                style_pad_gap="#space_sm">
          <!-- Connected state (shown when connected) -->
          <lv_obj name="connected_info"
                  width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                  scrollable="false" flex_flow="column" style_pad_gap="#space_xs">
            <!-- Network name with signal icon -->
            <lv_obj width="100%"
                    height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                    flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
              <icon name="connection_signal_icon" src="wifi_strength_4" size="sm" variant="success"/>
              <text_body name="connected_ssid" text="MyNetwork" style_text_color="#text_primary"/>
            </lv_obj>
            <!-- IP Address -->
            <lv_obj width="100%"
                    height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                    flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
              <text_small text="IP Address:" style_text_color="#text_secondary"/>
              <text_small name="connected_ip" text="192.168.1.100" style_text_color="#text_primary"/>
            </lv_obj>
            <!-- Disconnect button -->
            <lv_button name="disconnect_btn"
                       width="content" height="36" style_radius="#border_radius" style_border_width="0"
                       style_bg_color="#error" style_margin_top="#space_md" style_pad_left="#space_lg"
                       style_pad_right="#space_lg">
              <text_small text="Disconnect" align="center" style_text_color="#ffffff"/>
            </lv_button>
          </lv_obj>
          <!-- Disconnected state (shown when not connected) -->
          <lv_obj name="disconnected_info"
                  width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                  scrollable="false" flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm"
                  hidden="true">
            <icon src="wifi_off" size="sm" variant="secondary"/>
            <text_body text="Not connected" style_text_color="#text_secondary"/>
          </lv_obj>
        </lv_obj>
      </lv_obj>
      <!-- Divider -->
      <lv_obj width="100%"
              height="1" style_bg_color="#card_border" style_bg_opa="100" style_border_width="0" scrollable="false"/>
      <!-- ================================================================== -->
      <!-- AVAILABLE NETWORKS SECTION -->
      <!-- ================================================================== -->
      <lv_obj width="100%"
              height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
              flex_flow="column" style_pad_gap="#space_sm">
        <!-- Section Header with Scan Button -->
        <lv_obj width="100%"
                height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                flex_flow="row" style_flex_main_place="space_between" style_flex_cross_place="center">
          <!-- Title with icon -->
          <lv_obj width="content"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                  flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
            <icon src="wifi" size="sm" variant="secondary"/>
            <text_body text="Available Networks" style_text_color="#text_primary"/>
          </lv_obj>
          <!-- Scan button -->
          <lv_button name="scan_btn"
                     width="content" height="36" style_radius="#border_radius" style_border_width="0"
                     style_pad_left="#space_md" style_pad_right="#space_md">
            <lv_obj width="content"
                    height="100%" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                    flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_xs">
              <icon name="scan_icon" src="refresh" size="xs" variant="primary"/>
              <text_small name="scan_btn_text" text="Scan" align="center"/>
            </lv_obj>
          </lv_button>
        </lv_obj>
        <!-- Scanning indicator (hidden by default) -->
        <lv_obj name="scanning_indicator"
                width="100%" height="content" style_bg_opa="0" style_border_width="0" style_pad_all="#space_md"
                scrollable="false" flex_flow="row" style_flex_main_place="center" style_flex_cross_place="center"
                style_pad_gap="#space_sm" hidden="true">
          <spinner size="md"/>
          <text_small text="Scanning for networks..." style_text_color="#text_secondary"/>
        </lv_obj>
        <!-- Networks List Container (populated dynamically by C++) -->
        <lv_obj name="networks_list"
                width="100%" height="content" style_bg_color="#app_bg_color" style_bg_opa="255"
                style_radius="#border_radius" style_border_width="0" style_pad_all="0" scrollable="false"
                flex_flow="column">
          <!-- wifi_network_item components are created here dynamically -->
          <!-- Placeholder when no networks found -->
          <lv_obj name="no_networks_placeholder"
                  width="100%" height="80" style_bg_opa="0" style_border_width="0" style_pad_all="#space_lg"
                  scrollable="false" flex_flow="column" style_flex_main_place="center" style_flex_cross_place="center">
            <icon src="wifi_off" size="md" variant="secondary"/>
            <text_small text="No networks found" style_text_color="#text_secondary" style_margin_top="#space_sm"/>
            <text_small text="Tap Scan to search again" style_text_color="#text_secondary"/>
          </lv_obj>
        </lv_obj>
      </lv_obj>
      <!-- Spacer -->
      <lv_obj width="100%" flex_grow="1" style_bg_opa="0" style_border_width="0" scrollable="false"/>
      <!-- Info Note at bottom -->
      <lv_obj width="100%"
              height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
              flex_flow="row" style_flex_cross_place="center" style_pad_gap="#space_sm">
        <icon src="info" size="xs" variant="secondary"/>
        <text_small text="Tap a network to connect" style_text_color="#text_secondary"/>
      </lv_obj>
    </lv_obj>
  </view>
</component>
