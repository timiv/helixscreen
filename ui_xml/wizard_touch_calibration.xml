<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <!-- First-Run Wizard: Touch Calibration Screen -->
  <!-- 3-point touchscreen calibration for framebuffer displays -->
  <consts>
    <!-- Step metadata (read by wizard orchestrator) -->
    <str name="step_title" value="Printer Setup: Touch Calibration"/>
    <str name="step_subtitle" value="Calibrate your touchscreen for accurate input"/>
    <int name="step_order" value="0"/>
  </consts>
  <view name="wizard_touch_calibration_root"
        extends="lv_obj" width="100%" height="100%" scrollable="false" style_bg_opa="0" style_border_width="0"
        style_pad_all="0" flex_flow="column" style_flex_main_place="center" style_flex_cross_place="center">

    <!-- Full-screen touch capture overlay - captures touches anywhere during calibration -->
    <!-- Hidden in IDLE/VERIFY/COMPLETE states, shown during POINT_1/2/3 -->
    <lv_obj name="touch_capture_overlay"
            width="100%" height="100%" align="top_left" style_bg_opa="0" style_border_width="0" hidden="true"
            flag_clickable="true">
      <event_cb trigger="clicked" callback="on_touch_cal_screen_touched"/>
    </lv_obj>

    <!-- Crosshair target - positioned dynamically by C++ code -->
    <!-- Uses MDI target icon (U+F04FE) via icon_target constant -->
    <!-- Visual indicator only - touch capture is handled by overlay above -->
    <!-- flag_floating=true takes it out of flex layout for absolute positioning -->
    <lv_label name="crosshair"
              width="50" height="50" text="#icon_target" style_text_font="mdi_icons_48"
              style_text_color="#primary_color" style_text_align="center" align="top_left" flag_floating="true"
              hidden="true"/>

    <!-- Test area container - shown in COMPLETE state for testing calibration -->
    <lv_obj name="test_area_container"
            width="100%" flex_grow="1" flex_flow="row" style_flex_main_place="start" style_flex_cross_place="stretch"
            style_pad_all="#space_md" style_pad_gap="#space_md" style_bg_opa="0" style_border_width="0"
            scrollable="false" hidden="true">

      <!-- Large touch test area - user taps here to verify calibration -->
      <lv_obj name="test_touch_area"
              height="100%" flex_grow="1" style_bg_color="#card_bg" style_bg_opa="255" style_border_width="1"
              style_border_color="#border_color" style_radius="#radius_md" flag_clickable="true" scrollable="false">
        <event_cb trigger="pressed" callback="on_touch_cal_test_area_touched"/>
        <!-- Instruction label centered -->
        <text_body text="Touch anywhere to test calibration" align="center"/>
      </lv_obj>

      <!-- Button column on right - flex_grow=0 to prevent expansion -->
      <lv_obj width="120"
              height="100%" style_bg_opa="0" style_border_width="0" flex_flow="column" style_flex_main_place="center"
              style_flex_cross_place="center" flex_grow="0" scrollable="false">
        <lv_button name="btn_retry" width="100" height="#button_height" style_bg_color="#card_bg">
          <text_body text="Retry" align="center"/>
          <event_cb trigger="clicked" callback="on_touch_cal_retry_clicked"/>
        </lv_button>
      </lv_obj>
    </lv_obj>
  </view>
</component>
