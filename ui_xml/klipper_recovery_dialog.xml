<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <!-- Full-screen backdrop overlay -->
  <view name="klipper_recovery_backdrop"
        extends="lv_obj" width="100%" height="100%" style_bg_opa="200" style_border_width="0" style_radius="0"
        style_pad_all="0" align="center" clickable="true">
    <!-- Dialog card using ui_dialog (provides themed background, height="content") -->
    <ui_dialog name="klipper_recovery_card"
               width="85%" height="content" align="center" flex_flow="column" style_flex_main_place="start"
               style_pad_gap="0" style_border_width="2" style_border_color="#warning">
      <!-- Content area -->
      <lv_obj width="100%"
              height="content" style_pad_left="#space_lg" style_pad_right="#space_lg" style_pad_top="#space_lg"
              style_pad_bottom="#space_lg" flex_flow="column" style_flex_cross_place="center" style_pad_gap="#space_md">
        <!-- Warning icon -->
        <icon src="alert_octagon" size="lg" variant="warning"/>
        <!-- Title -->
        <text_heading width="100%" text="Printer Shutdown" translation_tag="Printer Shutdown" style_text_align="center"/>
        <!-- Message -->
        <text_muted width="100%"
                    text="Klipper has entered shutdown state. This may be due to an emergency stop, thermal runaway, or configuration error." translation_tag="Klipper has entered shutdown state. This may be due to an emergency stop, thermal runaway, or configuration error."
                    long_mode="wrap" style_text_align="center"/>
      </lv_obj>
      <!-- Horizontal divider above buttons -->
      <divider_horizontal/>
      <!-- Button column -->
      <lv_obj width="100%" style_pad_all="#space_md" flex_flow="column" style_pad_gap="#space_sm">
        <!-- Restart Klipper (primary action) -->
        <ui_button name="restart_klipper_btn"
                   width="100%" height="#button_height" variant="warning" icon="refresh" text="Restart Klipper" translation_tag="Restart Klipper">
          <event_cb trigger="clicked" callback="recovery_restart_klipper_clicked"/>
        </ui_button>
        <!-- Firmware Restart (secondary action) -->
        <ui_button name="firmware_restart_btn"
                   width="100%" height="#button_height" variant="secondary" icon="update" text="Firmware Restart" translation_tag="Firmware Restart">
          <event_cb trigger="clicked" callback="recovery_firmware_restart_clicked"/>
        </ui_button>
        <!-- Dismiss (tertiary action) -->
        <ui_button name="recovery_dismiss_btn"
                   width="100%" height="#button_height" variant="ghost" style_border_width="#border_width" style_border_color="#border" text="Dismiss" translation_tag="Dismiss">
          <event_cb trigger="clicked" callback="recovery_dismiss_clicked"/>
        </ui_button>
      </lv_obj>
    </ui_dialog>
  </view>
</component>
