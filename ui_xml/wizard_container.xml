<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <!-- Wizard-specific constants -->
  <!-- wizard_button_width is responsive: C++ overrides based on screen size -->
  <!-- See ui_wizard.cpp::ui_wizard_container_register_responsive_constants() -->
  <consts>
    <!-- Button width (RESPONSIVE: SMALL=110/MEDIUM=140/LARGE=160) -->
    <const name="wizard_button_width" value="160"/>
  </consts>
  <!-- Wizard Container Root: Vertical stack (header, content, footer) -->
  <!-- Background color applied via app_bg_color runtime constant (theme-aware: light/dark variants) -->
  <view name="wizard_container"
        extends="lv_obj" width="100%" height="100%" style_bg_color="#app_bg_color" flex_flow="column" style_pad_all="0"
        style_pad_hor="#space_md" style_border_width="0">

    <!-- ==================== HEADER ==================== -->
    <!-- Reusable header component with title and progress indicator -->
    <wizard_header_bar name="wizard_header"/>

    <!-- ==================== CONTENT ==================== -->
    <lv_obj name="wizard_content"
            width="100%" flex_grow="1" scrollable="true" style_bg_opa="0" style_pad_all="0" style_border_width="0">
      <!-- Wizard screens loaded here by C++ (lv_obj_set_parent) -->
    </lv_obj>

    <!-- ==================== FOOTER ==================== -->
    <lv_obj name="wizard_footer"
            width="100%" height="content" flex_flow="row" style_flex_main_place="space_between"
            style_flex_cross_place="center" style_flex_track_place="center" style_pad_all="0" style_pad_gap="0"
            style_pad_bottom="#space_md" scrollable="false" style_bg_opa="0" style_border_width="0">

      <!-- BACK BUTTON (hidden on step 0 via conditional binding) -->
      <lv_button name="btn_back" width="#wizard_button_width" height="#button_height">
        <text_body text="Back" align="center"/>
        <event_cb trigger="clicked" callback="on_back_clicked"/>
        <!-- Hide when wizard_back_visible == 0 (at first visible step) -->
        <bind_flag_if_eq subject="wizard_back_visible" flag="hidden" ref_value="0"/>
      </lv_button>

      <!-- make sure that the Next button is right justified -->
      <lv_obj name="wizard_footer_spacer"
              width="0" height="#button_height" style_border_width="0" style_bg_opa="0" flex_grow="1"/>

      <!-- NEXT/FINISH BUTTON (text bound to subject, clickable only when connection_test_passed == 1) -->
      <lv_button name="btn_next" width="#wizard_button_width" height="#button_height" style_bg_color="#primary_color">
        <text_body name="btn_next_label"
                   bind_text="wizard_next_button_text" align="center" style_text_color="#text_primary"
                   style_border_width="0"/>
        <event_cb trigger="clicked" callback="on_next_clicked"/>
        <!-- Button is enabled when connection_test_passed == 1 (disabled otherwise) -->
        <bind_state_if_not_eq subject="connection_test_passed" state="disabled" ref_value="1"/>
        <bind_flag_if_eq subject="connection_test_passed" flag="clickable" ref_value="1"/>
      </lv_button>

    </lv_obj>
  </view>
</component>
