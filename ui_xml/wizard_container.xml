<!--
  Copyright (C) 2025 356C LLC
  Author: Preston Brown <pbrown@brown-house.net>

  This file is part of HelixScreen.

  HelixScreen is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  HelixScreen is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with HelixScreen. If not, see <https://www.gnu.org/licenses/>.
-->
<!--
  Wizard Container - Responsive Multi-Step UI Component

  LVGL 9.4 XML using runtime constants for screen-size adaptation.

  Architecture:
  - HEADER: Progress indicator + title (min-height, responsive fonts)
  - CONTENT: flex_grow=1 (takes all available space)
  - FOOTER: Back / Next|Finish buttons (space-between layout)

  Responsive Design:
  - Constants defined below with LARGE screen defaults
  - C++ overrides with responsive values based on screen size before widget creation
  - Single XML template works for TINY (480x320) â†’ LARGE (1024x600+)
  - See ui_wizard.cpp::ui_wizard_container_register_responsive_constants()
-->
<component>
    <!-- Wizard-specific responsive constants (LARGE screen defaults) -->
    <!-- C++ overrides ALL constants below based on screen size before component creation -->
    <!-- See ui_wizard.cpp::ui_wizard_container_register_responsive_constants() -->
    <consts>
        <!-- Layout dimensions (RESPONSIVE: SMALL=4/MEDIUM=6/LARGE=8) -->
        <const name="list_item_padding" value="8"/>

        <!-- Layout dimensions (RESPONSIVE: inherits from globals padding_normal/gap_normal) -->
        <const name="wizard_padding" value="20"/>               <!-- SMALL=12/MEDIUM=16/LARGE=20 -->
        <const name="wizard_gap" value="12"/>                   <!-- SMALL=8/MEDIUM=10/LARGE=12 -->

        <!-- Layout dimensions (RESPONSIVE: scales with screen size) -->
        <const name="wizard_header_height" value="48"/>         <!-- SMALL=32/MEDIUM=42/LARGE=48 -->
        <const name="wizard_footer_height" value="88"/>         <!-- SMALL=72/MEDIUM=82/LARGE=88 -->
        <const name="wizard_button_width" value="160"/>         <!-- SMALL=110/MEDIUM=140/LARGE=160 -->

        <!-- Typography (RESPONSIVE: smaller fonts for smaller screens) -->
        <const name="wizard_header_font" value="montserrat_20"/> <!-- SMALL=14/MEDIUM=16/LARGE=20 -->
        <const name="wizard_title_font" value="montserrat_20"/>  <!-- SMALL=16/MEDIUM=20/LARGE=font_heading -->

        <!-- WiFi screen dimensions (RESPONSIVE: scales with screen size) -->
        <const name="wifi_toggle_height" value="64"/>           <!-- SMALL=32/MEDIUM=48/LARGE=64 -->
        <const name="wifi_card_height" value="140"/>            <!-- SMALL=80/MEDIUM=120/LARGE=140 -->
        <const name="wifi_ethernet_height" value="120"/>        <!-- SMALL=70/MEDIUM=100/LARGE=120 -->
        <const name="network_item_height" value="100"/>         <!-- SMALL=60/MEDIUM=80/LARGE=100 -->
        <const name="network_icon_size" value="32"/>            <!-- SMALL=20/MEDIUM=24/LARGE=32 -->

        <!-- WiFi screen typography (RESPONSIVE: smaller fonts for smaller screens) -->
        <const name="wifi_network_title_font" value="montserrat_16"/> <!-- SMALL=14/MEDIUM=16/LARGE=font_body -->
    </consts>

    <view name="wizard_container" extends="lv_obj" width="100%" height="100%">

        <!-- Root: Vertical stack (header, content, footer) -->
        <!-- Background color applied from C++ (theme-aware: light/dark variants) -->
        <lv_obj name="wizard_root"
                width="100%" height="100%"
                flex_flow="column"
                style_flex_main_place="space_between"
                style_pad_all="0"
                style_bg_opa="255"
                style_border_width="0">

            <!-- ==================== HEADER ==================== -->
            <lv_obj name="wizard_header"
                    width="100%" 
                    height="LV_SIZE_CONTENT"
                    style_min_height="#wizard_header_height"
                    style_pad_column="#wizard_gap"
                    flex_flow="row"
                    style_flex_main_place="space_between"
                    style_flex_cross_place="center"
                    scrollable="false"
                    style_bg_opa="0"
                    style_border_width="0">

                <!-- Title: "WiFi Setup" -->
                <lv_label name="wizard_title"
                          bind_text="wizard_title"
                          style_text_font="#wizard_title_font"
                         />

                <!-- Progress indicator: "Step 2 of 7" -->
                <lv_label name="wizard_progress"
                          bind_text="wizard_progress"
                          style_text_font="#wizard_header_font"
                          style_text_color="#text_secondary"/>
            </lv_obj>

            <!-- ==================== CONTENT ==================== -->
            <lv_obj name="wizard_content"
                    width="100%" height="0"
                    flex_grow="1"
                    scrollable="true"
                    style_bg_opa="0"
                    style_pad_ver="0"
                    style_border_width="0">
                <!-- Wizard screens loaded here by C++ (lv_obj_set_parent) -->
            </lv_obj>

            <!-- ==================== FOOTER ==================== -->
            <lv_obj name="wizard_footer"
                    width="100%" 
                    height="LV_SIZE_CONTENT"
                    style_min_height="#wizard_footer_height"
                    style_pad_column="#wizard_gap"
                    flex_flow="row"
                    style_flex_main_place="space_between"
                    style_flex_cross_place="center"
                    scrollable="false"
                    style_bg_opa="0"
                    style_border_width="1">

                <!-- BACK BUTTON (hidden on step 1 via conditional binding) -->
                <lv_button name="btn_back"
                           width="#wizard_button_width"
                           height="#button_height">
                    <lv_label text="Back" align="center"/>
                    <event_cb trigger="clicked" callback="on_back_clicked"/>
                    <!-- Hide when current_step == 1 -->
                    <lv_obj-bind_flag_if_eq subject="current_step" flag="hidden" ref_value="1"/>
                </lv_button>

                <lv_obj name="wizard_footer_spacer"
                        width="0"
                        height="#button_height"
                        style_pad_ver="#wizard_padding"
                        style_border_width="0"
                        flex_grow="1"/>

                <!-- NEXT/FINISH BUTTON (text bound to subject) -->
                <lv_button name="btn_next"
                           width="#wizard_button_width"
                           height="#button_height">
                    <lv_label name="btn_next_label"
                              bind_text="wizard_next_button_text"
                              align="center"/>
                    <event_cb trigger="clicked" callback="on_next_clicked"/>
                </lv_button>
            </lv_obj>

        </lv_obj>
    </view>
</component>
