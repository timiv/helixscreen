<?xml version="1.0"?>
<!-- Copyright 2025 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <!-- Fan Control Sub-Screen -->
  <!-- Part cooling fan slider + presets, hotend fan status display -->
  <!-- Uses shared backdrop from navigation system -->
  <view name="fan_panel"
        extends="lv_obj" width="#overlay_panel_width" height="100%" align="right_mid" style_border_width="0"
        style_pad_all="0" style_bg_opa="255" style_bg_color="#card_bg" scrollable="false" flex_flow="column">
    <!-- Header Bar -->
    <header_bar name="overlay_header" title="Fan Control"/>
    <!-- Content Area: Two Columns -->
    <lv_obj name="overlay_content"
            width="100%" flex_grow="1" style_bg_opa="0" style_pad_all="#space_lg" scrollable="false"
            style_border_width="0" style_border_opa="0" flex_flow="row" style_flex_main_place="space_between">
      <!-- Left Column (50%): Fan Status Cards -->
      <lv_obj name="left_column"
              width="50%" height="100%" style_bg_opa="0" style_pad_all="0" scrollable="false" style_border_width="0"
              style_border_opa="0" flex_flow="column" style_flex_main_place="start" style_flex_cross_place="center"
              style_pad_gap="#space_lg">
        <!-- Part Cooling Fan Status Card -->
        <ui_card name="part_fan_card"
                 width="280" height="160" style_radius="#border_radius_large" flex_flow="column"
                 style_flex_main_place="center" style_flex_cross_place="center" style_pad_gap="#space_sm">
          <icon src="fan" variant="accent"/>
          <text_body text="Part Cooling Fan"/>
          <lv_label name="part_fan_speed"
                    bind_text="fan_part_speed_display" style_text_font="montserrat_28" align="center"/>
        </ui_card>
        <!-- Hotend Fan Status Card (read-only, firmware controlled) -->
        <ui_card name="hotend_fan_card"
                 width="280" height="160" style_radius="#border_radius_large" flex_flow="column"
                 style_flex_main_place="center" style_flex_cross_place="center" style_pad_gap="#space_sm">
          <icon src="fan" variant="secondary"/>
          <text_body text="Hotend Fan"/>
          <lv_label name="hotend_fan_speed"
                    bind_text="fan_hotend_speed_display" style_text_font="montserrat_28" align="center"/>
          <text_small text="(Firmware controlled)" style_text_color="#text_secondary"/>
        </ui_card>
      </lv_obj>
      <!-- Right Column (50%): Controls -->
      <lv_obj name="right_column"
              width="50%" height="100%" style_bg_opa="0" style_pad_all="0" scrollable="false" style_border_width="0"
              style_border_opa="0" flex_flow="column" style_flex_main_place="start" style_flex_cross_place="center"
              style_pad_gap="#space_lg">
        <!-- Speed Label -->
        <text_body width="100%" text="Part Cooling Speed:" style_text_align="left"/>
        <!-- Speed Slider with Value Display -->
        <lv_obj name="slider_container"
                width="100%" height="60" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                flex_flow="column" style_flex_main_place="center" style_flex_cross_place="center"
                style_pad_gap="#space_sm">
          <lv_obj width="100%"
                  height="40" style_bg_opa="0" style_border_width="0" style_pad_all="0" style_pad_left="8"
                  style_pad_right="20" scrollable="false" flex_flow="row" style_flex_cross_place="center"
                  flag_overflow_visible="true">
            <lv_slider name="fan_speed_slider" flex_grow="1" min_value="0" max_value="100" value="0"/>
          </lv_obj>
          <lv_label name="fan_speed_value" text="0%" style_text_font="montserrat_28" align="center"/>
        </lv_obj>
        <!-- Preset Buttons (2x2 Grid) -->
        <lv_obj name="preset_grid"
                width="100%" height="124" style_bg_opa="0" style_pad_all="0" style_border_width="0" scrollable="false"
                flex_flow="column" style_flex_main_place="start" style_flex_cross_place="center"
                style_pad_gap="#space_sm">
          <!-- Row 1: Off, 50% -->
          <lv_obj width="100%"
                  height="58" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                  flex_flow="row" style_flex_main_place="center" style_flex_cross_place="center"
                  style_pad_gap="#space_sm">
            <lv_button name="preset_off" width="120" height="48" style_radius="6" style_border_width="0">
              <text_small text="Off" align="center"/>
            </lv_button>
            <lv_button name="preset_50" width="120" height="48" style_radius="6" style_border_width="0">
              <text_small text="50%" align="center"/>
            </lv_button>
          </lv_obj>
          <!-- Row 2: 75%, 100% -->
          <lv_obj width="100%"
                  height="58" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"
                  flex_flow="row" style_flex_main_place="center" style_flex_cross_place="center"
                  style_pad_gap="#space_sm">
            <lv_button name="preset_75" width="120" height="48" style_radius="6" style_border_width="0">
              <text_small text="75%" align="center"/>
            </lv_button>
            <lv_button name="preset_100" width="120" height="48" style_radius="6" style_border_width="0">
              <text_small text="100%" align="center"/>
            </lv_button>
          </lv_obj>
        </lv_obj>
        <!-- Status Message -->
        <text_small name="status_message" width="100%" text="" style_text_align="center" scrollable="false"/>
      </lv_obj>
    </lv_obj>
  </view>
</component>
