<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <consts>
    <!-- Nav bar width per breakpoint (selected by horizontal resolution in C++) -->
    <px name="nav_width_tiny" value="64"/>
    <px name="nav_width_small" value="76"/>
    <px name="nav_width_medium" value="94"/>
    <px name="nav_width_large" value="120"/>
  </consts>
  <view extends="lv_obj"
        width="#nav_width" height="100%" style_pad_top="#space_xl" style_pad_bottom="#space_xl" style_pad_left="0" style_pad_right="0" flex_flow="column"
        style_flex_main_place="start" style_flex_track_place="center" style_flex_cross_place="center"
        style_border_width="0" style_radius="0" scrollable="false" style_bg_color="#card_bg" style_bg_opa="255">
    <!-- ================================================================== -->
    <!-- Navigation Buttons - Dual icon pattern (accent/secondary variants) -->
    <!-- ================================================================== -->
    <!-- Home Button (Panel 0) -->
    <ui_button name="nav_btn_home"
               width="100%" flex_grow="1" variant="ghost" flex_flow="column" style_flex_main_place="center"
               style_flex_cross_place="center" style_flex_track_place="center" style_border_width="0">
      <!-- Active icon (accent color) - shown when active_panel == 0 -->
      <icon name="nav_icon_home_active" src="home" size="#icon_size" variant="primary" hidden="true">
        <bind_flag_if_not_eq subject="active_panel" flag="hidden" ref_value="0"/>
      </icon>
      <!-- Inactive icon (gray) - shown when active_panel != 0 -->
      <icon name="nav_icon_home_inactive" src="home" size="#icon_size" variant="secondary">
        <bind_flag_if_eq subject="active_panel" flag="hidden" ref_value="0"/>
      </icon>
    </ui_button>
    <!-- Controls Button (Panel 2) - CONNECTION + KLIPPY READY REQUIRED -->
    <!-- Uses combined nav_buttons_enabled subject (1=enabled when connected AND klippy ready) -->
    <ui_button name="nav_btn_controls"
               width="100%" flex_grow="1" variant="ghost" flex_flow="column" style_flex_main_place="center"
               style_flex_cross_place="center" style_flex_track_place="center" style_border_width="0">
      <!-- Disabled clickability when not enabled (disconnected OR klippy not ready) -->
      <bind_state_if_not_eq subject="nav_buttons_enabled" state="disabled" ref_value="1"/>
      <!-- Normal icons container - visible only when enabled -->
      <lv_obj name="nav_controls_icons" clickable="false" style_pad_all="0">
        <bind_flag_if_eq subject="nav_buttons_enabled" flag="hidden" ref_value="0"/>
        <!-- Active icon (accent) - shown when on controls panel -->
        <icon name="nav_icon_controls_active" src="fine_tune" size="#icon_size" variant="primary" hidden="true">
          <bind_flag_if_not_eq subject="active_panel" flag="hidden" ref_value="2"/>
        </icon>
        <!-- Inactive icon (secondary) - shown when not on controls panel -->
        <icon name="nav_icon_controls_inactive" src="fine_tune" size="#icon_size" variant="secondary">
          <bind_flag_if_eq subject="active_panel" flag="hidden" ref_value="2"/>
        </icon>
      </lv_obj>
      <!-- Disabled icon - visible only when disabled (disconnected OR klippy not ready) -->
      <icon name="nav_icon_controls_disabled" src="fine_tune" size="#icon_size" variant="disabled">
        <bind_flag_if_eq subject="nav_buttons_enabled" flag="hidden" ref_value="1"/>
      </icon>
    </ui_button>
    <!-- Filament Button (Panel 3) - CONNECTION + KLIPPY READY REQUIRED -->
    <!-- Uses combined nav_buttons_enabled subject (1=enabled when connected AND klippy ready) -->
    <ui_button name="nav_btn_filament"
               width="100%" flex_grow="1" variant="ghost" flex_flow="column" style_flex_main_place="center"
               style_flex_cross_place="center" style_flex_track_place="center" style_border_width="0">
      <!-- Disabled clickability when not enabled (disconnected OR klippy not ready) -->
      <bind_state_if_not_eq subject="nav_buttons_enabled" state="disabled" ref_value="1"/>
      <!-- Normal icons container - visible only when enabled -->
      <lv_obj name="nav_filament_icons" clickable="false" style_pad_all="0">
        <bind_flag_if_eq subject="nav_buttons_enabled" flag="hidden" ref_value="0"/>
        <!-- Active icon (accent) - shown when on filament panel -->
        <icon name="nav_icon_filament_active" src="filament" size="#icon_size" variant="primary" hidden="true">
          <bind_flag_if_not_eq subject="active_panel" flag="hidden" ref_value="3"/>
        </icon>
        <!-- Inactive icon (secondary) - shown when not on filament panel -->
        <icon name="nav_icon_filament_inactive" src="filament" size="#icon_size" variant="secondary">
          <bind_flag_if_eq subject="active_panel" flag="hidden" ref_value="3"/>
        </icon>
      </lv_obj>
      <!-- Disabled icon - visible only when disabled (disconnected OR klippy not ready) -->
      <icon name="nav_icon_filament_disabled" src="filament" size="#icon_size" variant="disabled">
        <bind_flag_if_eq subject="nav_buttons_enabled" flag="hidden" ref_value="1"/>
      </icon>
    </ui_button>
    <!-- Settings Button (Panel 4) -->
    <ui_button name="nav_btn_settings"
               width="100%" flex_grow="1" variant="ghost" flex_flow="column" style_flex_main_place="center"
               style_flex_cross_place="center" style_flex_track_place="center" style_border_width="0">
      <icon name="nav_icon_settings_active" src="settings" size="#icon_size" variant="primary" hidden="true">
        <bind_flag_if_not_eq subject="active_panel" flag="hidden" ref_value="4"/>
      </icon>
      <icon name="nav_icon_settings_inactive" src="settings" size="#icon_size" variant="secondary">
        <bind_flag_if_eq subject="active_panel" flag="hidden" ref_value="4"/>
      </icon>
    </ui_button>
    <!-- Advanced Button (Panel 5) -->
    <ui_button name="nav_btn_advanced"
               width="100%" flex_grow="1" variant="ghost" flex_flow="column" style_flex_main_place="center"
               style_flex_cross_place="center" style_flex_track_place="center" style_border_width="0">
      <icon name="nav_icon_advanced_active" src="dots_vertical" size="#icon_size" variant="primary" hidden="true">
        <bind_flag_if_not_eq subject="active_panel" flag="hidden" ref_value="5"/>
      </icon>
      <icon name="nav_icon_advanced_inactive" src="dots_vertical" size="#icon_size" variant="secondary">
        <bind_flag_if_eq subject="active_panel" flag="hidden" ref_value="5"/>
      </icon>
    </ui_button>
  </view>
</component>
