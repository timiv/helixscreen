<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <!-- Nozzle Temperature Sub-Screen -->
  <!-- Temperature control with presets and custom input -->
  <!-- Component-local constants for theme-aware colors -->
  <consts>
    <!-- Nozzle temperature graph series color (red) -->
    <const name="temp_graph_nozzle_light" value="#FF4444"/>
    <const name="temp_graph_nozzle_dark" value="#FF6666"/>
    <!-- Graph visualization colors -->
    <color name="graph_line_primary" value="#bf616a"/>
    <!-- nord11 - Aurora red -->
    <color name="graph_line_secondary" value="#ebcb8b"/>
    <!-- nord13 - Aurora yellow -->
    <color name="graph_line_target" value="#88c0d0"/>
    <!-- nord8 - Frost cyan -->
    <color name="graph_bg_dark" value="#2e3440"/>
    <!-- nord0 - Polar Night -->
    <color name="graph_bg_light" value="#eceff4"/>
    <!-- nord6 - Snow Storm -->
    <!-- Heater-specific colors (theme-aware) -->
    <color name="heating_color_light" value="#bf616a"/>
    <!-- nord11 -->
    <color name="heating_color_dark" value="#bf616a"/>
    <!-- nord11 -->
    <color name="cooling_color_light" value="#88c0d0"/>
    <!-- nord8 -->
    <color name="cooling_color_dark" value="#88c0d0"/>
    <!-- nord8 -->
  </consts>
  <!-- Uses shared backdrop from navigation system -->
  <view name="nozzle_temp_panel" extends="overlay_panel" title="Nozzle Temperature">
    <!-- Content Area: Two Columns -->
    <lv_obj name="overlay_content"
            width="100%" flex_grow="1" style_bg_opa="0" style_pad_all="#space_lg" scrollable="false"
            style_border_width="0" style_border_opa="0" flex_flow="row" style_flex_main_place="space_between">
      <!-- Left Column (66%): Temperature Graph with Y-axis labels + X-axis time labels -->
      <lv_obj name="graph_outer_container"
              width="66%" height="100%" style_bg_opa="0" style_pad_all="0" scrollable="false" style_border_width="0"
              style_border_opa="0" flex_flow="column" style_pad_gap="0">
        <!-- Chart area (Y-axis labels and X-axis time labels rendered directly on canvas) -->
        <lv_obj name="chart_area"
                width="100%" flex_grow="1" style_bg_opa="0" style_pad_all="0" scrollable="false" style_border_width="0"
                style_border_opa="0">
          <!-- Temperature graph widget created programmatically in C++ -->
        </lv_obj>
        <!-- X-axis time labels are now rendered directly on the graph canvas via draw callback -->
      </lv_obj>
      <!-- Right Column (33%): Controls - simple top-to-bottom flow -->
      <lv_obj name="right_column"
              width="33%" height="100%" style_bg_opa="0" style_pad_all="0" scrollable="false" style_border_width="0"
              style_border_opa="0" flex_flow="column" style_flex_main_place="start" style_flex_cross_place="center"
              style_pad_gap="#space_sm">
        <!-- Current/Target Temperature Display Card with Icon and Status -->
        <ui_card name="temp_display_card"
                 width="100%" height="content" style_radius="0" flex_flow="column" style_flex_main_place="center"
                 style_pad_gap="#space_xs" style_pad_all="#space_sm">
          <!-- Horizontal centering row with flex spacers -->
          <lv_obj width="100%"
                  height="content" flex_flow="row" style_bg_opa="0" style_border_width="0" style_pad_all="0"
                  scrollable="false">
            <!-- Left spacer -->
            <lv_obj height="1"
                    flex_grow="1" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"/>
            <!-- Content column: left-aligned children -->
            <lv_obj width="content"
                    height="content" flex_flow="column" style_flex_cross_place="start" style_bg_opa="0"
                    style_border_width="0" style_pad_all="0" style_pad_gap="#space_xs" scrollable="false">
              <icon name="heater_icon" src="heater" size="xl" variant="secondary"/>
              <lv_obj height="content"
                      style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false" flex_flow="column"
                      style_flex_main_place="center" style_flex_cross_place="start" style_pad_gap="#space_xxs">
                <text_small style_border_width="0" text="Current / Target"/>
                <temp_display name="nozzle_temp_display"
                              size="lg" show_target="true" bind_current="extruder_temp" bind_target="extruder_target"/>
              </lv_obj>
              <!-- Status Message -->
              <text_small name="status_message" style_border_width="0" bind_text="nozzle_status" style_text_align="left"/>
            </lv_obj>
            <!-- Right spacer -->
            <lv_obj height="1"
                    flex_grow="1" style_bg_opa="0" style_border_width="0" style_pad_all="0" scrollable="false"/>
          </lv_obj>
        </ui_card>
        <!-- Spacer to push buttons to bottom -->
        <lv_obj width="1" flex_grow="1" style_pad_all="0" scrollable="false"/>
        <!-- Buttons: all together at bottom -->
        <lv_obj name="preset_grid"
                width="100%" height="content" style_bg_opa="0" style_pad_all="0" style_border_width="0"
                scrollable="false" flex_flow="row_wrap" style_flex_main_place="space_between" style_pad_gap="#space_xs">
          <ui_button name="preset_off" width="48%" text="Off">
            <event_cb trigger="clicked" callback="on_nozzle_preset_off_clicked"/>
          </ui_button>
          <ui_button name="preset_pla" width="48%" text="PLA">
            <event_cb trigger="clicked" callback="on_nozzle_preset_pla_clicked"/>
          </ui_button>
          <ui_button name="preset_petg" width="48%" text="PETG">
            <event_cb trigger="clicked" callback="on_nozzle_preset_petg_clicked"/>
          </ui_button>
          <ui_button name="preset_abs" width="48%" text="ABS">
            <event_cb trigger="clicked" callback="on_nozzle_preset_abs_clicked"/>
          </ui_button>
        </lv_obj>
        <ui_button name="btn_custom" width="100%" text="Custom...">
          <event_cb trigger="clicked" callback="on_nozzle_custom_clicked"/>
        </ui_button>
      </lv_obj>
    </lv_obj>
  </view>
</component>
