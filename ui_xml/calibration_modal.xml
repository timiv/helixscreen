<?xml version="1.0"?>
<!-- Copyright 2025 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <!-- Full-screen backdrop overlay -->
  <view name="calibration_modal_root"
        extends="lv_obj" width="100%" height="100%" style_bg_color="#000000" style_bg_opa="200" style_border_width="0"
        style_radius="0" style_pad_all="0" align="center" clickable="true">
    <!-- Reactive visibility binding: hidden when calibration_modal_visible == 0 -->
    <lv_obj-bind_flag_if_eq subject="calibration_modal_visible" flag="hidden" ref_value="0"/>
    <!-- Dialog card using ui_dialog widget -->
    <ui_dialog name="dialog_card"
               width="420" height="content" align="center" flex_flow="column" style_flex_main_place="start"
               style_pad_gap="0">
      <!-- Header with title and close button -->
      <lv_obj width="100%"
              height="content" style_bg_opa="0" style_border_width="0" style_pad_left="#space_lg"
              style_pad_right="#space_md" style_pad_top="#space_lg" style_pad_bottom="#space_md" flex_flow="row"
              style_flex_main_place="space_between" style_flex_cross_place="center">
        <text_heading text="Calibration &amp; Tools"/>
        <!-- Close button -->
        <lv_button name="btn_close"
                   width="40" height="40" style_radius="#border_radius" style_bg_opa="0" style_border_width="0"
                   style_shadow_width="0" clickable="true">
          <event_cb trigger="clicked" callback="on_calibration_modal_close"/>
          <icon src="close" size="sm" variant="secondary" align="center"/>
        </lv_button>
      </lv_obj>
      <!-- Horizontal divider -->
      <lv_obj width="100%"
              height="1" style_bg_color="#text_secondary" style_bg_opa="64" style_border_width="0" style_pad_all="0"/>
      <!-- Menu buttons container -->
      <lv_obj width="100%"
              height="content" style_bg_opa="0" style_border_width="0" style_pad_all="#space_md" flex_flow="column"
              style_pad_gap="#space_sm">
        <!-- Bed Mesh button -->
        <lv_button name="btn_bed_mesh"
                   width="100%" height="64" style_radius="#border_radius" style_border_width="0" style_shadow_width="0"
                   style_bg_color="#card_bg" flex_flow="row" style_flex_cross_place="center" style_pad_left="#space_md"
                   style_pad_right="#space_md" clickable="true">
          <event_cb trigger="clicked" callback="on_calibration_bed_mesh"/>
          <icon src="grid_large" size="md" variant="accent" style_pad_right="#space_md"/>
          <lv_obj width="content"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" flex_flow="column"
                  flex_grow="1">
            <text_body text="Bed Mesh"/>
            <text_small text="Visualize &amp; calibrate" style_text_color="#text_secondary"/>
          </lv_obj>
          <icon src="chevron_right" size="sm" variant="secondary"/>
        </lv_button>
        <!-- Z-Offset Calibration button -->
        <lv_button name="btn_zoffset"
                   width="100%" height="64" style_radius="#border_radius" style_border_width="0" style_shadow_width="0"
                   style_bg_color="#card_bg" flex_flow="row" style_flex_cross_place="center" style_pad_left="#space_md"
                   style_pad_right="#space_md" clickable="true">
          <event_cb trigger="clicked" callback="on_calibration_zoffset"/>
          <icon src="z_closer" size="md" variant="accent" style_pad_right="#space_md"/>
          <lv_obj width="content"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" flex_flow="column"
                  flex_grow="1">
            <text_body text="Z-Offset Calibration"/>
            <text_small text="Paper test method" style_text_color="#text_secondary"/>
          </lv_obj>
          <icon src="chevron_right" size="sm" variant="secondary"/>
        </lv_button>
        <!-- Bed Screws button -->
        <lv_button name="btn_screws"
                   width="100%" height="64" style_radius="#border_radius" style_border_width="0" style_shadow_width="0"
                   style_bg_color="#card_bg" flex_flow="row" style_flex_cross_place="center" style_pad_left="#space_md"
                   style_pad_right="#space_md" clickable="true">
          <event_cb trigger="clicked" callback="on_calibration_screws"/>
          <icon src="wrench" size="md" variant="accent" style_pad_right="#space_md"/>
          <lv_obj width="content"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" flex_flow="column"
                  flex_grow="1">
            <text_body text="Bed Screws"/>
            <text_small text="Manual bed leveling" style_text_color="#text_secondary"/>
          </lv_obj>
          <icon src="chevron_right" size="sm" variant="secondary"/>
        </lv_button>
        <!-- Separator -->
        <lv_obj width="100%"
                height="1" style_bg_color="#text_secondary" style_bg_opa="32" style_border_width="0" style_pad_all="0"
                style_margin_top="#space_xs" style_margin_bottom="#space_xs"/>
        <!-- Motors Disable button (warning style) -->
        <lv_button name="btn_motors"
                   width="100%" height="64" style_radius="#border_radius" style_border_width="0" style_shadow_width="0"
                   style_bg_color="#card_bg" flex_flow="row" style_flex_cross_place="center" style_pad_left="#space_md"
                   style_pad_right="#space_md" clickable="true">
          <event_cb trigger="clicked" callback="on_calibration_motors"/>
          <icon src="engine_off" size="md" variant="warning" style_pad_right="#space_md"/>
          <lv_obj width="content"
                  height="content" style_bg_opa="0" style_border_width="0" style_pad_all="0" flex_flow="column"
                  flex_grow="1">
            <text_body text="Disable Motors"/>
            <text_small text="Release steppers" style_text_color="#text_secondary"/>
          </lv_obj>
        </lv_button>
      </lv_obj>
    </ui_dialog>
  </view>
</component>
