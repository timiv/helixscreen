<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!-- FanDial: Reusable Bambu-style 270-degree rotary arc fan control widget -->
<!-- Usage: <fan_dial fan_name="Part Fan" fan_id="fan" initial_value="0"/> -->
<component>
  <api>
    <prop name="fan_name" type="string" default="Fan"/>
    <prop name="fan_id" type="string" default="fan"/>
    <prop name="initial_value" type="number" default="0"/>
  </api>
  <view name="fan_dial_root"
        extends="lv_obj" width="175" height="190" flex_flow="column"
        style_flex_main_place="start" style_flex_cross_place="center"
        style_bg_color="#card_bg" style_bg_opa="255" style_radius="#border_radius"
        style_pad_all="#space_sm" style_pad_gap="#space_xs" scrollable="false">
    <!-- Fan name label at top -->
    <text_small name="name_label" text="$fan_name" style_text_color="#text_primary"/>
    <!-- Arc dial container with centered percentage display -->
    <lv_obj name="dial_container"
            width="110" height="110" style_bg_opa="0" style_border_width="0"
            style_pad_all="0" scrollable="false">
      <!-- 270-degree arc dial -->
      <lv_arc name="dial_arc"
              width="110" height="110" align="center"
              bg_start_angle="135" bg_end_angle="45"
              start_angle="135" end_angle="135"
              min_value="0" max_value="100" value="$initial_value"
              rotation="0" mode="normal"
              style_arc_width="10" style_arc_color="#theme_grey"
              style_arc_width:indicator="10" style_arc_color:indicator="#primary_color"
              style_arc_rounded="true" style_arc_rounded:indicator="true"
              style_bg_opa="0" style_border_width="0">
        <event_cb trigger="value_changed" callback="on_fan_dial_value_changed"/>
      </lv_arc>
      <!-- Centered percentage label -->
      <text_heading name="speed_label" text="Off" align="center" style_text_color="#text_primary"/>
    </lv_obj>
    <!-- Off/On button row at bottom -->
    <lv_obj name="button_row"
            width="100%" height="32" style_bg_opa="0" style_border_width="0"
            style_pad_all="0" scrollable="false" flex_flow="row"
            style_flex_main_place="space_evenly" style_flex_cross_place="center"
            style_pad_gap="#space_xs">
      <lv_button name="btn_off" width="60" height="28" style_radius="#space_sm">
        <text_small text="Off" align="center"/>
        <event_cb trigger="clicked" callback="on_fan_dial_off_clicked"/>
      </lv_button>
      <lv_button name="btn_on" width="60" height="28" style_radius="#space_sm">
        <text_small text="On" align="center"/>
        <event_cb trigger="clicked" callback="on_fan_dial_on_clicked"/>
      </lv_button>
    </lv_obj>
  </view>
</component>
