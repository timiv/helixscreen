<?xml version="1.0"?>
<!-- Copyright 2025 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->

<!--
  Emergency Stop Floating Button

  A floating red button that appears during active prints (PRINTING/PAUSED states)
  on relevant panels. Clicking triggers an emergency stop (M112).

  Visibility is controlled by C++ via the estop_visible subject since XML
  bindings can't express "visible if state == 1 OR state == 2".

  Parent component should be the screen (lv_screen_active()) for proper
  z-ordering above all panels.
-->
<component>
  <view extends="lv_obj" name="estop_float"
        width="72" height="72"
        align="bottom_right"
        x="-20" y="-20"
        style_radius="36"
        style_bg_color="#error_color"
        style_bg_opa="255"
        style_border_width="3"
        style_border_color="#FFFFFF"
        style_shadow_width="12"
        style_shadow_opa="150"
        style_shadow_color="#000000"
        style_shadow_ofs_x="0"
        style_shadow_ofs_y="4"
        clickable="true"
        hidden="true">

    <!-- Visibility controlled by C++ subject (can't do OR logic in XML) -->
    <lv_obj-bind_flag_if_eq subject="estop_visible" flag="hidden" ref_value="0"/>

    <!-- Emergency icon centered -->
    <icon name="estop_icon" src="mat_emergency_img" size="lg" align="center"
          color="#text_primary"/>

    <!-- Click handler -->
    <event_cb trigger="clicked" callback="emergency_stop_clicked"/>
  </view>
</component>
