<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<component>
  <!-- Motion Sub-Screen: XYZ Movement & Homing -->
  <!-- Simplified button grid design (vs circular jog pad) -->
  <!-- Component-local constants for jog pad colors (theme-aware) -->
  <consts>
    <!-- Jog pad colors using Nord frost blues for contrast -->
    <!-- Outer ring background - lighter frost blue -->
    <const name="jog_outer_ring_light" value="#88c0d0"/>
    <!-- nord8 frost light blue -->
    <const name="jog_outer_ring_dark" value="#81a1c1"/>
    <!-- nord9 frost blue -->
    <!-- Inner circle background - darker frost blue -->
    <const name="jog_inner_circle_light" value="#81a1c1"/>
    <!-- nord9 frost blue -->
    <const name="jog_inner_circle_dark" value="#5e81ac"/>
    <!-- nord10 frost dark blue -->
    <!-- Grid divider lines -->
    <const name="jog_grid_lines_light" value="#2e3440"/>
    <!-- nord0 dark for contrast -->
    <const name="jog_grid_lines_dark" value="#2e3440"/>
    <!-- nord0 -->
    <!-- Home button background -->
    <const name="jog_home_bg_light" value="#d8dee9"/>
    <!-- nord4 -->
    <const name="jog_home_bg_dark" value="#4c566a"/>
    <!-- nord3 -->
    <!-- Home button border -->
    <const name="jog_home_border_light" value="#81a1c1"/>
    <!-- nord9 -->
    <const name="jog_home_border_dark" value="#81a1c1"/>
    <!-- nord9 -->
    <!-- Home icon text color -->
    <const name="jog_home_text_light" value="#2e3440"/>
    <!-- nord0 -->
    <const name="jog_home_text_dark" value="#eceff4"/>
    <!-- nord6 -->
    <!-- Zone boundary lines -->
    <const name="jog_boundary_lines_light" value="#2e3440"/>
    <!-- nord0 dark for contrast -->
    <const name="jog_boundary_lines_dark" value="#2e3440"/>
    <!-- nord0 -->
    <!-- Distance labels (1mm/10mm text) -->
    <const name="jog_distance_labels_light" value="#2e3440"/>
    <!-- nord0 -->
    <const name="jog_distance_labels_dark" value="#d8dee9"/>
    <!-- nord4 -->
    <!-- Axis labels (X+/Y+ etc) -->
    <const name="jog_axis_labels_light" value="#2e3440"/>
    <!-- nord0 -->
    <const name="jog_axis_labels_dark" value="#eceff4"/>
    <!-- nord6 -->
    <!-- Press highlight overlay -->
    <const name="jog_highlight_light" value="#2e3440"/>
    <!-- nord0 -->
    <const name="jog_highlight_dark" value="#eceff4"/>
    <!-- nord6 -->
  </consts>
  <!-- Uses shared backdrop from navigation system -->
  <view name="motion_panel"
        extends="lv_obj" width="#overlay_panel_width" height="100%" align="right_mid" style_pad_all="0"
        style_border_width="0" style_bg_opa="255" style_bg_color="#card_bg" scrollable="false" flex_flow="column">
    <!-- Header Bar with E-stop action button -->
    <header_bar name="overlay_header"
                title="Motion: XYZ" hide_action_button="false" action_button_icon="alert_octagon"
                action_button_bg_color="#error_color" action_button_radius="9999" action_button_width="44"
                action_button_height="44" action_button_pad="0" hide_action_button_text="true"
                action_button_callback="emergency_stop_clicked"/>
    <!-- Content Area: Two Columns -->
    <lv_obj name="overlay_content"
            width="100%" flex_grow="1" style_bg_opa="0" style_pad_all="#space_lg" scrollable="false"
            style_border_width="0" style_border_opa="0" flex_flow="row" style_flex_main_place="center">
      <!-- Left Column (65%): XY Jog Pad -->
      <lv_obj name="left_column"
              width="65%" height="100%" style_bg_opa="0" style_pad_all="0" scrollable="false" style_border_width="0"
              style_border_opa="0">
        <!-- Circular Jog Pad: Custom-Drawn Two-Zone Design (Bambu Lab Style) -->
        <!-- Outer ring = large jogs, inner circle = small jogs -->
        <!-- Custom draw shows concentric circles, radial dividers, axis labels, home icon -->
        <!-- Click detection uses angle from center to determine direction -->
        <lv_obj name="jog_pad_container"
                width="content" height="content" style_bg_opa="0" style_pad_all="0" style_border_width="0"
                style_border_opa="0" scrollable="false" clickable="true" align="center">
          <!-- No child widgets - all graphics drawn via LV_EVENT_DRAW_POST -->
          <!-- Click handled via LV_EVENT_CLICKED with angle-based direction detection -->
        </lv_obj>
      </lv_obj>
      <!-- Right Column (35%): Z-Axis Controls + Position Display -->
      <lv_obj name="right_column"
              width="35%" height="100%" style_bg_opa="0" style_pad_all="0" scrollable="false" style_border_width="0"
              style_border_opa="0" flex_flow="column" style_flex_main_place="start" style_flex_cross_place="center"
              style_pad_gap="#space_md">
        <!-- Position Display - compact vertical layout -->
        <lv_obj name="position_col"
                width="100%" height="content" style_bg_opa="0" style_pad_all="0" style_border_width="0"
                flex_flow="column" style_flex_main_place="start" style_flex_cross_place="start"
                style_pad_gap="#space_xs">
          <lv_obj width="100%"
                  height="content" style_bg_opa="0" style_pad_all="0" style_border_width="0" flex_flow="row"
                  style_pad_gap="#space_xs">
            <text_small text="X:" style_text_color="#text_secondary"/>
            <text_small name="pos_x" bind_text="motion_pos_x" style_text_color="#text_primary"/>
          </lv_obj>
          <lv_obj width="100%"
                  height="content" style_bg_opa="0" style_pad_all="0" style_border_width="0" flex_flow="row"
                  style_pad_gap="#space_xs">
            <text_small text="Y:" style_text_color="#text_secondary"/>
            <text_small name="pos_y" bind_text="motion_pos_y" style_text_color="#text_primary"/>
          </lv_obj>
          <lv_obj width="100%"
                  height="content" style_bg_opa="0" style_pad_all="0" style_border_width="0" flex_flow="row"
                  style_pad_gap="#space_xs">
            <text_small text="Z:" style_text_color="#text_secondary"/>
            <text_small name="pos_z" bind_text="motion_pos_z" style_text_color="#text_primary"/>
          </lv_obj>
        </lv_obj>
        <!-- Z-Axis Button Group (responsive: uses flex_grow to fill available space) -->
        <!-- Label centered between up/down button pairs -->
        <lv_obj name="z_controls"
                width="100%" flex_grow="1" style_bg_opa="0" style_pad_all="0" style_border_width="0"
                style_border_opa="0" scrollable="false" flex_flow="column" style_flex_main_place="space_evenly"
                style_flex_cross_place="center" style_pad_gap="#space_sm">
          <lv_button name="z_up_10"
                     width="100%" flex_grow="1" style_max_height="80" style_radius="#border_radius"
                     style_border_width="0" flex_flow="row" style_flex_main_place="center"
                     style_flex_cross_place="center" style_flex_track_place="center" style_pad_gap="#space_xs">
            <event_cb trigger="clicked" callback="on_motion_z_up_10"/>
            <icon src="arrow_up" size="sm" variant="primary"/>
            <text_body text="10mm"/>
          </lv_button>
          <lv_button name="z_up_1"
                     width="100%" flex_grow="1" style_max_height="80" style_radius="#border_radius"
                     style_border_width="0" flex_flow="row" style_flex_main_place="center"
                     style_flex_cross_place="center" style_flex_track_place="center" style_pad_gap="#space_xs">
            <event_cb trigger="clicked" callback="on_motion_z_up_1"/>
            <icon src="arrow_up" size="sm" variant="primary"/>
            <text_body text="1mm"/>
          </lv_button>
          <!-- Z-Axis label - shows "Bed" or "Print Head" based on kinematics -->
          <text_body name="z_axis_label" width="100%" bind_text="motion_z_axis_label" style_text_align="center"/>
          <lv_button name="z_down_1"
                     width="100%" flex_grow="1" style_max_height="80" style_radius="#border_radius"
                     style_border_width="0" flex_flow="row" style_flex_main_place="center"
                     style_flex_cross_place="center" style_flex_track_place="center" style_pad_gap="#space_xs">
            <event_cb trigger="clicked" callback="on_motion_z_down_1"/>
            <icon src="arrow_down" size="sm" variant="primary"/>
            <text_body text="1mm"/>
          </lv_button>
          <lv_button name="z_down_10"
                     width="100%" flex_grow="1" style_max_height="80" style_radius="#border_radius"
                     style_border_width="0" flex_flow="row" style_flex_main_place="center"
                     style_flex_cross_place="center" style_flex_track_place="center" style_pad_gap="#space_xs">
            <event_cb trigger="clicked" callback="on_motion_z_down_10"/>
            <icon src="arrow_down" size="sm" variant="primary"/>
            <text_body text="10mm"/>
          </lv_button>
        </lv_obj>
      </lv_obj>
    </lv_obj>
  </view>
</component>
