<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!-- LED Settings Overlay Panel -->
<!-- Configures LED startup preference, auto state, and macro devices -->
<!-- Uses setting_* components for consistency with main settings panel -->
<component>
  <view name="led_settings_overlay"
        extends="overlay_panel" width="#overlay_panel_width_full" title="LED Settings" title_tag="LED Settings"
        bg_color="#screen_bg">
    <!-- Content Area -->
    <lv_obj name="overlay_content"
            width="100%" flex_grow="1" style_pad_top="0" style_pad_left="#space_lg" style_pad_right="#space_lg"
            style_pad_bottom="#space_lg" scrollable="true" flex_flow="column">
      <!-- ================================================================== -->
      <!-- LED SELECTION SECTION -->
      <!-- ================================================================== -->
      <setting_section_header title="LED SELECTION" title_tag="LED SELECTION" icon="light"/>
      <setting_led_chip_row name="row_led_select"
                            label="LEDs" label_tag="LEDs" icon="lightbulb_outline"
                            description="LEDs controlled by the light button"
                            description_tag="LEDs controlled by the light button"/>
      <!-- ================================================================== -->
      <!-- STARTUP SECTION -->
      <!-- ================================================================== -->
      <setting_section_header title="STARTUP" title_tag="STARTUP" icon="power"/>
      <setting_toggle_row name="row_led_on_at_start"
                          label="LED on at Start" label_tag="LED on at Start" icon="light"
                          description="Turn on LEDs when printer starts"
                          description_tag="Turn on LEDs when printer starts" callback="on_led_on_at_start_changed"/>
      <!-- ================================================================== -->
      <!-- AUTO STATE SECTION -->
      <!-- ================================================================== -->
      <setting_section_header title="AUTO STATE" title_tag="AUTO STATE" icon="tune"/>
      <setting_toggle_row name="row_auto_state_enabled"
                          label="Automatic LED Control" label_tag="Automatic LED Control" icon="tune_variant"
                          description="Change LED color based on printer state"
                          description_tag="Change LED color based on printer state" callback="on_auto_state_changed"/>
      <!-- Auto-state mapping rows (populated dynamically in C++) -->
      <lv_obj name="auto_state_rows_container"
              width="100%" height="content" flex_flow="column" style_pad_gap="0" style_bg_opa="0" style_border_width="0"
              style_pad_left="0" style_pad_right="0" style_pad_top="#space_sm" style_pad_bottom="0" scrollable="false">
        <bind_flag_if_eq subject="led_auto_state_enabled" flag="hidden" ref_value="0"/>
      </lv_obj>
      <!-- ================================================================== -->
      <!-- MACRO DEVICES SECTION -->
      <!-- ================================================================== -->
      <setting_section_header title="MACRO DEVICES"
                              title_tag="MACRO DEVICES" icon="code_braces" action_button_text="Add"
                              action_button_text_tag="Add" action_button_icon="plus"
                              action_button_callback="on_add_macro_device" hide_action_button="false"
                              hide_action_button_icon="false"/>
      <!-- Macro device cards are populated dynamically in C++ -->
      <lv_obj name="macro_devices_container"
              width="100%" height="content" flex_flow="column" style_pad_gap="#space_sm" style_bg_opa="0"
              style_border_width="0" style_pad_all="0" scrollable="false"/>
      <!-- Info note about macro devices -->
      <lv_obj width="100%"
              height="content" scrollable="false" style_pad_left="#space_lg" style_pad_right="#space_lg"
              style_pad_top="#space_md" style_pad_bottom="#space_lg" flex_flow="row" style_flex_cross_place="center"
              style_pad_gap="#space_sm" style_bg_opa="0" style_border_width="0">
        <icon src="info" size="xs" variant="secondary"/>
        <text_small text="Assign Klipper macros to control LEDs via on/off, toggle, or presets"
                    translation_tag="Assign Klipper macros to control LEDs via on/off, toggle, or presets"/>
      </lv_obj>
    </lv_obj>
  </view>
</component>
