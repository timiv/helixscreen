<!--
  Copyright (C) 2025 356C LLC
  Author: Preston Brown <pbrown@brown-house.net>

  This file is part of GuppyScreen.

  GuppyScreen is free software: you can redistribute it and/or modify
  it under the terms of the GNU General Public License as published by
  the Free Software Foundation, either version 3 of the License, or
  (at your option) any later version.

  GuppyScreen is distributed in the hope that it will be useful,
  but WITHOUT ANY WARRANTY; without even the implied warranty of
  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
  GNU General Public License for more details.

  You should have received a copy of the GNU General Public License
  along with GuppyScreen. If not, see <https://www.gnu.org/licenses/>.
-->

<component>
	<!-- Print File Detail View - Full overlay showing file details and print options -->
	<!-- Uses reactive subjects for file data (no API properties needed) -->

	<view extends="lv_obj"
	      width="100%"
	      height="100%"
	      style_bg_color="#panel_bg"
	      style_bg_opa="255"
	      style_border_width="0"
	      style_pad_left="#padding_normal"
	      style_pad_right="#padding_normal"
	      style_pad_top="0"
	      style_pad_bottom="0"
	      style_pad_gap="20"
	      flex_flow="row"
	      flag_clickable="true"
	      name="detail_view_root">

		<!-- ================================================================== -->
		<!-- LEFT SECTION: Thumbnail with overlays (2/3 width)                 -->
		<!-- ================================================================== -->
		<lv_obj name="thumbnail_section"
		        flex_grow="2"
		        height="100%"
		        style_bg_color="#file_card_thumbnail_bg"
		        style_border_width="0"
		        style_pad_all="0"
		        style_radius="0"
		        flex_flow="column"
		        style_flex_main_place="space_between">

			<!-- TOP OVERLAY: Header bar with semi-transparent background -->
			<lv_obj name="top_overlay"
			        width="100%"
			        style_bg_color="#panel_bg"
			        style_bg_opa="128"
			        style_border_width="0"
			        style_radius="0"
			        style_pad_top="20"
			        style_pad_bottom="0"
			        style_pad_left="0"
			        style_pad_right="0"
			        flex_flow="column"
			        flex_grow="0">

				<header_bar title="Print File"/>
			</lv_obj>

			<!-- MIDDLE: Thumbnail (grows to fill available space) -->
			<lv_obj name="thumbnail_container"
			        width="100%"
			        flex_grow="1"
			        style_bg_color="#file_card_thumbnail_bg"
			        style_border_width="0"
			        style_pad_all="0"
			        flex_flow="column"
			        style_flex_main_place="center"
			        style_flex_cross_place="center">
				<lv_image name="detail_thumbnail"
				          src="A:assets/images/placeholder_thumb_centered.png"/>
			</lv_obj>

			<!-- BOTTOM OVERLAY: Metadata -->
			<lv_obj name="metadata_overlay"
			        width="100%"
			        height="#detail_metadata_height"
			        style_bg_color="#panel_bg"
			        style_bg_opa="128"
			        style_border_width="0"
			        style_radius="0"
			        style_pad_left="16"
			        style_pad_right="16"
			        style_pad_top="16"
			        style_pad_bottom="0"
			        style_pad_gap="8"
			        flex_flow="column"
			        style_flex_main_place="start"
			        style_flex_cross_place="start"
			        flex_grow="0">

				<!-- Filename -->
				<lv_label name="detail_filename"
				          bind_text="selected_filename"
				          style_text_font="montserrat_16"
				          style_text_color="#text_primary"
				          width="100%"
				          height="20"
				          long_mode="dots"
				          flex_grow="0"/>

				<!-- Separator line -->
				<lv_obj name="separator"
				        width="100%"
				        height="#detail_separator_height"
				        style_bg_color="#primary_color"
				        style_border_width="0"
				        style_pad_all="0"
				        style_radius="0"/>

				<!-- Metadata row: time + filament -->
				<lv_obj name="metadata_row"
				        width="100%"
				        height="24"
				        style_bg_opa="0"
				        style_border_width="0"
				        style_pad_all="0"
				        style_pad_gap="20"
				        flex_flow="row"
				        style_flex_main_place="start"
				        style_flex_cross_place="center">

					<!-- Print time with icon -->
					<lv_obj name="time_container"
					        style_bg_opa="0"
					        style_border_width="0"
					        style_pad_all="0"
					        style_pad_gap="8"
					        flex_flow="row"
					        style_flex_cross_place="center"
					        height="24">
						<lv_label text="#icon_clock"
						          style_text_font="fa_icons_16"
						          style_text_color="#primary_color"
						          width="16"
						          height="16"/>
						<lv_label name="detail_print_time"
						          bind_text="selected_print_time"
						          style_text_font="montserrat_16"
						          style_text_color="#text_primary"
						          width="70"
						          height="20"/>
					</lv_obj>

					<!-- Filament weight with icon -->
					<lv_obj name="filament_container"
					        style_bg_opa="0"
					        style_border_width="0"
					        style_pad_all="0"
					        style_pad_gap="8"
					        flex_flow="row"
					        style_flex_cross_place="center"
					        height="24">
						<lv_label text="#icon_leaf"
						          style_text_font="fa_icons_16"
						          style_text_color="#primary_color"
						          width="16"
						          height="16"/>
						<lv_label name="detail_filament_weight"
						          bind_text="selected_filament_weight"
						          style_text_font="montserrat_16"
						          style_text_color="#text_primary"
						          width="70"
						          height="20"/>
					</lv_obj>
				</lv_obj>
			</lv_obj>
		</lv_obj>

		<!-- ================================================================== -->
		<!-- RIGHT SECTION: Options and buttons (1/3 width)                    -->
		<!-- ================================================================== -->
		<lv_obj name="options_section"
		        flex_grow="1"
		        height="100%"
		        style_bg_opa="0"
		        style_border_width="0"
		        style_pad_top="20"
		        style_pad_bottom="20"
		        style_pad_left="0"
		        style_pad_right="0"
		        style_pad_gap="16"
		        flex_flow="column"
		        style_flex_main_place="space_between">

			<!-- Options card -->
			<lv_obj name="options_card"
			        width="100%"
			        flex_grow="1"
			        style_bg_color="#card_bg"
			        style_border_width="0"
			        style_radius="#card_radius"
			        style_pad_all="16"
			        style_pad_gap="16"
			        flex_flow="column">

				<!-- Filament type dropdown -->
				<lv_label text="Filament Type"
				          style_text_font="montserrat_16"
				          style_text_color="#text_primary"
				          width="100%"
				          height="20"/>
				<lv_dropdown name="filament_dropdown"
				             options="PLA&#10;PETG&#10;ABS&#10;TPU&#10;Nylon&#10;ASA&#10;PC&#10;HIPS&#10;PVA&#10;Wood Fill&#10;Carbon Fiber"
				             width="100%"
				             height="#button_height"
				             style_bg_color="#card_bg_dark"
				             style_text_color="#text_primary"/>

				<!-- Automatic bed leveling checkbox -->
				<lv_checkbox name="bed_leveling_checkbox"
				             text="Automatic Bed Leveling"
				             width="100%"
				             style_text_font="montserrat_16"
				             style_text_color="#text_primary"/>
			</lv_obj>

			<!-- Button row -->
			<lv_obj name="button_row"
			        width="100%"
			        style_bg_opa="0"
			        style_border_width="0"
			        style_pad_top="#button_padding"
			        style_pad_bottom="0"
			        style_pad_left="0"
			        style_pad_right="0"
			        style_pad_gap="#button_padding"
			        flex_flow="row"
			        flex_grow="0">

				<!-- Delete button -->
				<lv_button name="delete_button"
				           flex_grow="1"
				           height="#button_height"
				           style_bg_color="#card_bg_dark"
				           style_radius="4"
				           flag_clickable="true">
					<lv_label text="Delete"
					          align="center"
					          style_text_font="montserrat_16"
					          style_text_color="#text_primary"/>
				</lv_button>

				<!-- Print button -->
				<lv_button name="print_button"
				           flex_grow="1"
				           height="#button_height"
				           style_bg_color="#primary_color"
				           style_radius="4"
				           flag_clickable="true">
					<lv_label text="Print"
					          align="center"
					          style_text_font="montserrat_16"
					          style_text_color="#text_primary"/>
				</lv_button>
			</lv_obj>
		</lv_obj>
	</view>
</component>
