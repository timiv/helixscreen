<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!-- Machine Limits Overlay Panel -->
<!-- Configures runtime velocity and acceleration limits -->
<!-- Max Z values are read-only (config-defined, not runtime adjustable) -->
<component>
  <view name="machine_limits_overlay"
        extends="overlay_panel" width="#overlay_panel_width_full" title="Machine Limits" title_tag="Machine Limits"
        bg_color="#screen_bg">
    <!-- Content Area -->
    <lv_obj name="overlay_content" width="100%" flex_grow="1" style_pad_top="0" style_pad_left="#space_lg" style_pad_right="#space_lg" style_pad_bottom="#space_lg" scrollable="true" flex_flow="column">
      <!-- ================================================================== -->
      <!-- INFO BANNER - Changes are temporary -->
      <!-- ================================================================== -->
      <lv_obj width="100%"
              height="content" style_bg_color="#info" style_bg_opa="25" scrollable="false" style_pad_left="#space_lg"
              style_pad_right="#space_lg" style_pad_top="#space_md" style_pad_bottom="#space_md" flex_flow="row"
              style_flex_cross_place="center" style_pad_gap="#space_sm" style_margin_left="#space_md"
              style_margin_right="#space_md" style_margin_top="#space_sm" style_radius="#border_radius">
        <icon src="info" size="sm" variant="info"/>
        <text_small text="Changes are temporary and reset on printer reboot"
                    translation_tag="Changes are temporary and reset on printer reboot" style_text_color="#info"/>
      </lv_obj>
      <!-- ================================================================== -->
      <!-- MAX VELOCITY -->
      <!-- ================================================================== -->
      <lv_obj name="max_velocity_section"
              width="100%" height="content" scrollable="false" style_pad_left="#space_lg" style_pad_right="#space_lg"
              style_pad_top="#space_md" style_pad_bottom="#space_md" flex_flow="column" style_pad_gap="#space_sm">
        <!-- Section Label -->
        <lv_obj width="100%"
                height="content" style_pad_all="0" scrollable="false" flex_flow="row"
                style_flex_main_place="space_between" style_flex_cross_place="center">
          <lv_obj height="content"
                  style_pad_all="0" scrollable="false" flex_flow="row" style_flex_cross_place="center"
                  style_pad_gap="#space_sm">
            <icon src="speed" size="sm" variant="secondary"/>
            <lv_obj height="content" style_pad_all="0" scrollable="false" flex_flow="column" style_pad_gap="#space_xxs">
              <text_body text="Max Velocity" translation_tag="Max Velocity"/>
              <text_small text="Maximum toolhead speed (mm/s)" translation_tag="Maximum toolhead speed (mm/s)"/>
            </lv_obj>
          </lv_obj>
          <!-- Current value display -->
          <text_body name="max_velocity_label" bind_text="max_velocity_display"/>
        </lv_obj>
        <!-- Slider -->
        <lv_obj width="100%"
                height="50" style_pad_left="#space_md" style_pad_right="#space_md" style_pad_top="#space_md"
                style_pad_bottom="#space_md" scrollable="false" flex_flow="row" style_flex_cross_place="center">
          <text_small width="40" text="50"/>
          <lv_slider name="max_velocity_slider"
                     flex_grow="1" min_value="50" max_value="1000" value="300" style_margin_left="#space_sm"
                     style_margin_right="#space_sm">
            <event_cb trigger="released" callback="on_max_velocity_changed"/>
          </lv_slider>
          <text_small width="50" text="1000"/>
        </lv_obj>
      </lv_obj>
      <!-- Divider -->
      <divider_horizontal/>
      <!-- ================================================================== -->
      <!-- MAX ACCELERATION -->
      <!-- ================================================================== -->
      <lv_obj name="max_accel_section"
              width="100%" height="content" scrollable="false" style_pad_left="#space_lg" style_pad_right="#space_lg"
              style_pad_top="#space_md" style_pad_bottom="#space_md" flex_flow="column" style_pad_gap="#space_sm">
        <!-- Section Label -->
        <lv_obj width="100%"
                height="content" style_pad_all="0" scrollable="false" flex_flow="row"
                style_flex_main_place="space_between" style_flex_cross_place="center">
          <lv_obj height="content"
                  style_pad_all="0" scrollable="false" flex_flow="row" style_flex_cross_place="center"
                  style_pad_gap="#space_sm">
            <icon src="speed_up" size="sm" variant="secondary"/>
            <lv_obj height="content" style_pad_all="0" scrollable="false" flex_flow="column" style_pad_gap="#space_xxs">
              <text_body text="Max Acceleration" translation_tag="Max Acceleration"/>
              <text_small text="Maximum acceleration (mm/s²)" translation_tag="Maximum acceleration (mm/s²)"/>
            </lv_obj>
          </lv_obj>
          <!-- Current value display -->
          <text_body name="max_accel_label" bind_text="max_accel_display"/>
        </lv_obj>
        <!-- Slider -->
        <lv_obj width="100%"
                height="50" style_pad_left="#space_md" style_pad_right="#space_md" style_pad_top="#space_md"
                style_pad_bottom="#space_md" scrollable="false" flex_flow="row" style_flex_cross_place="center">
          <text_small width="40" text="500"/>
          <lv_slider name="max_accel_slider"
                     flex_grow="1" min_value="500" max_value="50000" value="3000" style_margin_left="#space_sm"
                     style_margin_right="#space_sm">
            <event_cb trigger="released" callback="on_max_accel_changed"/>
          </lv_slider>
          <text_small width="55" text="50000"/>
        </lv_obj>
      </lv_obj>
      <!-- Divider -->
      <divider_horizontal/>
      <!-- ================================================================== -->
      <!-- ACCEL TO DECEL -->
      <!-- ================================================================== -->
      <lv_obj name="accel_to_decel_section"
              width="100%" height="content" scrollable="false" style_pad_left="#space_lg" style_pad_right="#space_lg"
              style_pad_top="#space_md" style_pad_bottom="#space_md" flex_flow="column" style_pad_gap="#space_sm">
        <!-- Section Label -->
        <lv_obj width="100%"
                height="content" style_pad_all="0" scrollable="false" flex_flow="row"
                style_flex_main_place="space_between" style_flex_cross_place="center">
          <lv_obj height="content"
                  style_pad_all="0" scrollable="false" flex_flow="row" style_flex_cross_place="center"
                  style_pad_gap="#space_sm">
            <icon src="speed_down" size="sm" variant="secondary"/>
            <lv_obj height="content" style_pad_all="0" scrollable="false" flex_flow="column" style_pad_gap="#space_xxs">
              <text_body text="Accel to Decel" translation_tag="Accel to Decel"/>
              <text_small text="Acceleration to deceleration limit (mm/s²)"
                          translation_tag="Acceleration to deceleration limit (mm/s²)"/>
            </lv_obj>
          </lv_obj>
          <!-- Current value display -->
          <text_body name="accel_to_decel_label" bind_text="accel_to_decel_display"/>
        </lv_obj>
        <!-- Slider -->
        <lv_obj width="100%"
                height="50" style_pad_left="#space_md" style_pad_right="#space_md" style_pad_top="#space_md"
                style_pad_bottom="#space_md" scrollable="false" flex_flow="row" style_flex_cross_place="center">
          <text_small width="40" text="500"/>
          <lv_slider name="accel_to_decel_slider"
                     flex_grow="1" min_value="500" max_value="50000" value="1500" style_margin_left="#space_sm"
                     style_margin_right="#space_sm">
            <event_cb trigger="released" callback="on_accel_to_decel_changed"/>
          </lv_slider>
          <text_small width="55" text="50000"/>
        </lv_obj>
      </lv_obj>
      <!-- Divider -->
      <divider_horizontal/>
      <!-- ================================================================== -->
      <!-- SQUARE CORNER VELOCITY -->
      <!-- ================================================================== -->
      <lv_obj name="square_corner_velocity_section"
              width="100%" height="content" scrollable="false" style_pad_left="#space_lg" style_pad_right="#space_lg"
              style_pad_top="#space_md" style_pad_bottom="#space_md" flex_flow="column" style_pad_gap="#space_sm">
        <!-- Section Label -->
        <lv_obj width="100%"
                height="content" style_pad_all="0" scrollable="false" flex_flow="row"
                style_flex_main_place="space_between" style_flex_cross_place="center">
          <lv_obj height="content"
                  style_pad_all="0" scrollable="false" flex_flow="row" style_flex_cross_place="center"
                  style_pad_gap="#space_sm">
            <icon src="cube" size="sm" variant="secondary"/>
            <lv_obj height="content" style_pad_all="0" scrollable="false" flex_flow="column" style_pad_gap="#space_xxs">
              <text_body text="Square Corner Velocity" translation_tag="Square Corner Velocity"/>
              <text_small text="Max speed through corners (mm/s)" translation_tag="Max speed through corners (mm/s)"/>
            </lv_obj>
          </lv_obj>
          <!-- Current value display -->
          <text_body name="square_corner_velocity_label" bind_text="square_corner_velocity_display"/>
        </lv_obj>
        <!-- Slider -->
        <lv_obj width="100%"
                height="50" style_pad_left="#space_md" style_pad_right="#space_md" style_pad_top="#space_md"
                style_pad_bottom="#space_md" scrollable="false" flex_flow="row" style_flex_cross_place="center">
          <text_small width="30" text="1"/>
          <lv_slider name="square_corner_velocity_slider"
                     flex_grow="1" min_value="1" max_value="20" value="5" style_margin_left="#space_sm"
                     style_margin_right="#space_sm">
            <event_cb trigger="released" callback="on_square_corner_velocity_changed"/>
          </lv_slider>
          <text_small width="30" text="20"/>
        </lv_obj>
      </lv_obj>
      <!-- Divider -->
      <divider_horizontal/>
      <!-- ================================================================== -->
      <!-- READ-ONLY SECTION HEADER -->
      <!-- ================================================================== -->
      <lv_obj width="100%"
              height="content" scrollable="false" style_pad_left="#space_lg" style_pad_right="#space_lg"
              style_pad_top="#space_md" style_pad_bottom="#space_xs" flex_flow="row" style_flex_cross_place="center"
              style_pad_gap="#space_sm">
        <icon src="lock" size="xs" variant="secondary"/>
        <text_small text="Config-defined (read-only)" translation_tag="Config-defined (read-only)"/>
      </lv_obj>
      <!-- ================================================================== -->
      <!-- MAX Z VELOCITY (read-only) -->
      <!-- ================================================================== -->
      <setting_info_row name="row_max_z_velocity"
                        label="Max Z Velocity" label_tag="Max Z Velocity" icon="axis_z_arrow" value="--" value_tag="--"/>
      <!-- ================================================================== -->
      <!-- MAX Z ACCEL (read-only) -->
      <!-- ================================================================== -->
      <setting_info_row name="row_max_z_accel"
                        label="Max Z Accel" label_tag="Max Z Accel" icon="axis_z_arrow" value="--" value_tag="--"/>
      <!-- Spacer to push buttons to bottom -->
      <lv_obj width="100%" flex_grow="1" scrollable="false"/>
    </lv_obj>
    <!-- ================================================================== -->
    <!-- ACTION BUTTONS -->
    <!-- ================================================================== -->
    <!-- Horizontal divider above buttons -->
    <divider_horizontal/>
    <!-- Action buttons row - centered Reset button only (changes apply immediately) -->
    <lv_obj width="100%"
            height="content" style_pad_all="#space_md" flex_flow="row" style_flex_main_place="center" scrollable="false">
      <!-- Reset button - restores to original config values from API -->
      <ui_button name="btn_reset" width="150" text="Reset" translation_tag="Reset">
        <event_cb trigger="clicked" callback="on_limits_reset"/>
      </ui_button>
    </lv_obj>
  </view>
</component>
