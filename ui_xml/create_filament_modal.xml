<?xml version="1.0"?>
<!-- Copyright (C) 2025-2026 356C LLC -->
<!-- SPDX-License-Identifier: GPL-3.0-or-later -->
<!-- Modal dialog for creating a new filament in the spool wizard -->
<component>
  <view name="create_filament_modal"
        extends="ui_dialog" width="80%" height="content" align="center"
        flex_flow="column" style_flex_main_place="start" style_pad_gap="0">
    <!-- Form container -->
    <lv_obj name="form_container"
            width="100%" height="content"
            style_pad_left="#space_lg" style_pad_right="#space_lg"
            style_pad_top="#space_md" style_pad_bottom="#space_sm"
            flex_flow="column" style_flex_cross_place="center"
            style_pad_gap="#space_sm">
      <!-- Title -->
      <text_heading width="100%" text="Create New Filament" translation_tag="Create New Filament"
                    style_text_align="center"/>

      <!-- Vendor context -->
      <lv_obj width="100%" height="content" flex_flow="row" style_pad_all="0" style_pad_gap="#space_xs"
              style_flex_cross_place="center" scrollable="false">
        <text_small text="Vendor:" translation_tag="Vendor:" style_text_color="#text_muted"/>
        <text_small name="modal_vendor_name" bind_text="wizard_selected_vendor_name"/>
      </lv_obj>

      <!-- Row 1: Material + Name side by side -->
      <lv_obj width="100%"
              height="content" flex_flow="row" style_pad_all="0" style_pad_gap="#space_sm" scrollable="false">
        <!-- Material dropdown -->
        <lv_obj height="content"
                flex_grow="1" flex_flow="column" style_pad_all="0" style_pad_gap="#space_xs" scrollable="false">
          <text_small name="material_label" text="Material" translation_tag="Material" style_text_color="#text_muted"/>
          <lv_dropdown name="material_dropdown"
                       width="100%"
                       options="PLA">
            <event_cb trigger="value_changed" callback="on_wizard_material_changed"/>
          </lv_dropdown>
        </lv_obj>
        <!-- Filament name (optional) -->
        <lv_obj height="content"
                flex_grow="1" flex_flow="column" style_pad_all="0" style_pad_gap="#space_xs" scrollable="false">
          <text_small text="Name (optional)" translation_tag="Name (optional)" style_text_color="#text_muted"/>
          <text_input name="new_filament_name"
                      width="100%" placeholder_text="e.g. Jet Black" placeholder_tag="e.g. Jet Black">
            <event_cb trigger="value_changed" callback="on_wizard_new_filament_name_changed"/>
          </text_input>
        </lv_obj>
      </lv_obj>

      <!-- Row 2: Color + Nozzle Temp + Bed Temp -->
      <lv_obj width="100%"
              height="content" flex_flow="row" style_pad_all="0" style_pad_gap="#space_sm"
              style_flex_cross_place="end" scrollable="false">
        <!-- Color swatch + picker -->
        <lv_obj height="content"
                flex_flow="column" style_pad_all="0" style_pad_gap="#space_xs" scrollable="false">
          <text_small name="color_label" text="Color" translation_tag="Color" style_text_color="#text_muted"/>
          <lv_obj width="content" height="content" flex_flow="row" style_pad_all="0" style_pad_gap="#space_xs"
                  style_flex_cross_place="center" scrollable="false">
            <lv_obj name="filament_color_swatch"
                    width="28" height="28" style_radius="14" style_bg_color="0x808080" style_bg_opa="255"
                    style_border_width="1" style_border_color="#border"/>
            <ui_button name="pick_color_btn"
                       variant="ghost" text="Pick" translation_tag="Pick" icon="palette">
              <event_cb trigger="clicked" callback="on_wizard_pick_filament_color"/>
            </ui_button>
          </lv_obj>
        </lv_obj>
        <!-- Nozzle temp range -->
        <lv_obj height="content"
                flex_grow="1" flex_flow="column" style_pad_all="0" style_pad_gap="#space_xs" scrollable="false">
          <text_small text="Nozzle Temp" translation_tag="Nozzle Temp" style_text_color="#text_muted"/>
          <lv_obj width="100%"
                  height="content" flex_flow="row" style_pad_all="0" style_pad_gap="#space_xs"
                  style_flex_cross_place="center" scrollable="false">
            <text_input name="nozzle_temp_min" flex_grow="1" placeholder_text="190" keyboard_hint="numeric">
              <event_cb trigger="value_changed" callback="on_wizard_nozzle_temp_changed"/>
            </text_input>
            <text_small text="-" style_text_color="#text_muted"/>
            <text_input name="nozzle_temp_max" flex_grow="1" placeholder_text="220" keyboard_hint="numeric">
              <event_cb trigger="value_changed" callback="on_wizard_nozzle_temp_changed"/>
            </text_input>
          </lv_obj>
        </lv_obj>
        <!-- Bed temp range -->
        <lv_obj height="content"
                flex_grow="1" flex_flow="column" style_pad_all="0" style_pad_gap="#space_xs" scrollable="false">
          <text_small text="Bed Temp" translation_tag="Bed Temp" style_text_color="#text_muted"/>
          <lv_obj width="100%"
                  height="content" flex_flow="row" style_pad_all="0" style_pad_gap="#space_xs"
                  style_flex_cross_place="center" scrollable="false">
            <text_input name="bed_temp_min" flex_grow="1" placeholder_text="50" keyboard_hint="numeric">
              <event_cb trigger="value_changed" callback="on_wizard_bed_temp_changed"/>
            </text_input>
            <text_small text="-" style_text_color="#text_muted"/>
            <text_input name="bed_temp_max" flex_grow="1" placeholder_text="70" keyboard_hint="numeric">
              <event_cb trigger="value_changed" callback="on_wizard_bed_temp_changed"/>
            </text_input>
          </lv_obj>
        </lv_obj>
      </lv_obj>

      <!-- Row 3: Weight fields -->
      <lv_obj width="100%"
              height="content" flex_flow="row" style_pad_all="0" style_pad_gap="#space_sm" scrollable="false">
        <lv_obj height="content"
                flex_grow="1" flex_flow="column" style_pad_all="0" style_pad_gap="#space_xs" scrollable="false">
          <text_small text="Net Weight (g)" translation_tag="Net Weight (g)" style_text_color="#text_muted"/>
          <text_input name="filament_weight" width="100%" placeholder_text="1000" keyboard_hint="numeric">
            <event_cb trigger="value_changed" callback="on_wizard_filament_weight_changed"/>
          </text_input>
        </lv_obj>
        <lv_obj height="content"
                flex_grow="1" flex_flow="column" style_pad_all="0" style_pad_gap="#space_xs" scrollable="false">
          <text_small text="Spool Weight (g)" translation_tag="Spool Weight (g)" style_text_color="#text_muted"/>
          <text_input name="filament_spool_weight" width="100%" placeholder_text="250" keyboard_hint="numeric">
            <event_cb trigger="value_changed" callback="on_wizard_spool_weight_changed"/>
          </text_input>
        </lv_obj>
      </lv_obj>
    </lv_obj>
    <!-- Divider + button row -->
    <modal_button_row
        primary_text="Add Filament" primary_callback="on_wizard_confirm_create_filament"
        secondary_text="Cancel" secondary_callback="on_wizard_cancel_create_filament"/>
  </view>
</component>
